# Расширенный Калькулятор - Инструкция по Сборке

## Системные Требования

### Необходимые Зависимости
- **Компилятор C++17** (g++ 7+ или clang++ 5+)
- **CMake** версии 3.14 или выше
- **Make** или другая система сборки

### Установка Зависимостей

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install build-essential cmake
```

**Fedora/RHEL:**
```bash
sudo dnf install gcc-c++ cmake make
```

**macOS:**
```bash
brew install cmake
```

---

## Сборка Проекта

### 1. Клонирование Репозитория
```bash
git clone <url_репозитория>
cd PersonalProjectUsharau
```

### 2. Создание Директории для Сборки
```bash
mkdir -p build
cd build
```

### 3. Конфигурация CMake
```bash
cmake ..
```

### 4. Компиляция
```bash
make -j4
```

**Параметр `-j4`** указывает использовать 4 потока для параллельной сборки (ускоряет процесс).

---

## Результаты Сборки

После успешной сборки в директории `build/` будут созданы:

- **`calculator`** - консольное приложение калькулятора
- **`calculator_tests`** - исполняемый файл с модульными тестами

---

## Запуск Приложения

### Консольный Калькулятор
```bash
./calculator
```

### С Аргументами Командной Строки

**Прямое вычисление:**
```bash
./calculator --calc "2 + 2 * 3"
```

**Загрузка истории:**
```bash
./calculator --load-history история.txt
```

**Вывод справки:**
```bash
./calculator --help
```

**Полный список опций:**
- `--help, -h` - показать справку
- `--calc "выражение"` - вычислить выражение напрямую
- `--load-history <файл>` - загрузить историю из файла
- `--log-level <LEVEL>` - уровень логирования (DEBUG|INFO|WARNING|ERROR)
- `--log-file <файл>` - записывать логи в файл
- `--mode <режим>` - запустить в определённом режиме (standard|scientific|programmer)

---

## Запуск Тестов

### Выполнить Все Тесты
```bash
./calculator_tests
```

### Результат
Все 25 модульных тестов должны пройти успешно:
```
[==========] 25 tests from 5 test suites ran.
[  PASSED  ] 25 tests.
```

---

## Режимы Работы Калькулятора

### 1. Standard Mode (Стандартный)
Базовая арифметика: +, -, *, /, sqrt()

**Пример:**
```
std> 2 + 2 * 3
= 8

std> sqrt(144)
= 12
```

### 2. Scientific Mode (Научный)
Научные функции: sin, cos, tan, log, exp, степени

**Примеры:**
```
sci> sin(90)
= 1

sci> 2^8
= 256

sci> log(100) * 2
= 4
```

**Важно:** Тригонометрические функции принимают аргументы в **градусах**.

### 3. Programmer Mode (Программист)
Битовые операции, конвертация систем счисления

**Примеры:**
```
prog> 15 + 3
DEC: 18
HEX: 0x12
BIN: 00000000000000000000000000010010

prog> AND
Enter first number: 12
Enter second number: 10
Result:
  DEC: 8
  HEX: 0x8
  BIN: 00000000000000000000000000001000
```

### 4. Date Calculations (Работа с Датами)
Вычисление разницы между датами, добавление/вычитание дней

**Формат ввода:** DD/MM/YYYY или DD-MM-YYYY

### 5. History Management (Управление Историей)
- Просмотр истории вычислений
- Отмена (Undo) и Повтор (Redo)
- Сохранение/загрузка из файла (текстовый и бинарный форматы)

### 6. Array Sorting (Сортировка Массивов)
- Bubble Sort, Quick Sort, Merge Sort
- Сохранение/загрузка массивов из файлов

---

## Работа с Файлами

### Текстовый Формат
Человеко-читаемый формат для истории:
```
2 + 2|4
sin(90)|1
sqrt(16)|4
```

### Бинарный Формат
Компактный формат для быстрого чтения/записи.

**В меню History Management:**
- Опция 4: Сохранить в файл (текстовый по умолчанию)
- Для бинарного формата используйте методы API: `saveBinary()`, `loadBinary()`

---

## Очистка Проекта

### Удалить Собранные Файлы
```bash
cd build
make clean
```

### Полная Пересборка
```bash
rm -rf build
mkdir build
cd build
cmake ..
make -j4
```

---

## Структура Проекта

```
PersonalProjectUsharau/
├── src/
│   ├── backend/          # Общая логика (MathUtils, ExpressionEvaluator, etc.)
│   ├── cli/              # Консольное приложение
│   ├── utils/            # Утилиты (ArgumentParser, LinkedList)
│   └── tests/            # Модульные тесты (Google Test)
├── build/                # Директория сборки (создаётся при сборке)
├── CMakeLists.txt        # Конфигурация CMake
├── BUILD.md              # Этот файл
└── README.md             # Общее описание проекта
```

---

## Решение Проблем

### Ошибка: "CMake version too old"
Обновите CMake до версии 3.14+:
```bash
# Ubuntu/Debian
sudo apt install cmake

# Или установите вручную с cmake.org
```

### Ошибка Компиляции: "C++17 required"
Убедитесь, что используете современный компилятор:
```bash
g++ --version  # Должен быть 7.0+
```

### Тесты Не Проходят
Пересоберите проект с нуля:
```bash
rm -rf build
mkdir build && cd build
cmake ..
make -j4
./calculator_tests
```

---

## Дополнительная Информация

- Все вычисления автоматически сохраняются в истории
- Поддержка вложенных выражений: `(sin(30) + cos(60)) / 2`
- Пробелы в выражениях опциональны: `sin(90)` = `sin( 90 )`

---

## Автор

**Ушаров Дмитрий Павлович**  
Группа 1, Курс ОиМП  
2025 год
